window.addEventListener("DOMContentLoaded",e=>{const t=function(){const e=document.body.querySelector("#mainNav");e&&(0===window.scrollY?e.classList.remove("navbar-shrink"):e.classList.add("navbar-shrink"))};t(),document.addEventListener("scroll",t),document.body.querySelector("#mainNav")&&new bootstrap.ScrollSpy(document.body,{target:"#mainNav",offset:74});const n=document.body.querySelector(".navbar-toggler");[].slice.call(document.querySelectorAll("#navbarResponsive .nav-link")).map(function(e){e.addEventListener("click",()=>{"none"!==window.getComputedStyle(n).display&&n.click()})});const l=document.URL.includes("fr_en")?"en":"fr",s=/(<([^>]+)>)/gi,i=document.getElementById("submitButton"),a=document.querySelector("form"),o=document.getElementById("reason"),c=document.getElementById("yourname"),d=document.getElementById("email"),r=document.getElementById("phone"),m=document.getElementById("message"),u=document.getElementById("complement"),y=new RegExp(/^\b[a-zA-Z0-9._%+-]+@[a-zA-Z_]+?\.[a-zA-Z]{2,3}$/,"m");let v=[],p=!0,h="localhost"===location.hostname?"http://localhost:8888/.netlify/functions/sendContactMail":"/.netlify/functions/sendContactMail",g="";a.addEventListener("submit",e=>{const t=y.test(d.value);c.value.length<3||c.value.length>150?(g="fr"===l?"Le champ nom doit avoir entre 3 et 150 caractères.":"the name field must contain between 3 and 150 characters.",v.push(g),p=!0,e.preventDefault(),document.getElementById("nameError").style.cssText="display : block; visibility : visible;",g=""):(p=!1,document.getElementById("nameError").style.cssText="display : none; visibility : hidden;"),o.value.length<3||o.value.length>150?(g="fr"===l?"Le champ raison sociale doit avoir entre 3 et 150 caractères.":"the Company Name field must contain between 3 and 150 characters.",v.push(g),p=!0,e.preventDefault(),document.getElementById("reasonError").style.cssText="display : block; visibility : visible;",g=""):(p=!1,document.getElementById("reasonError").style.cssText="display : none; visibility : hidden;"),!t||d.validity.typeMismatch||""===d.value.trim()?(g="fr"===l?"Le champ email semble invalide, veuillez entrer une adresse mail valide.":"the Email field doesn't appear to be valid. Please provide a valid email address.",v.push(g),p=!0,e.preventDefault(),document.getElementById("emailError").style.cssText="display : block; visibility : visible;",g=""):(p=!1,document.getElementById("emailError").style.cssText="display : none; visibility : hidden;"),r.validity.typeMismatch||r.validity.patternMismatch||""===r.value.trim()?(e.preventDefault(),g="fr"===l?"Le format du champ téléphone est incorrect.":"The Phone field is not valid.",v.push(g),p=!0,document.getElementById("phoneError").style.cssText="display : block; visibility : visible;",g=""):(r.setCustomValidity(""),p=!1,document.getElementById("phoneError").style.cssText="display : none; visibility : hidden;"),m.validity.typeMismatch||m.validity.patternMismatch||""===m.value.trim()||m.value.length<15||m.value.length>850?(e.preventDefault(),g="fr"===l?"Le champ message doit comporter au minimum 15 caractères (max 850).":"The Message field must contain at least 15 characters (850 max).",v.push(g),p=!0,document.getElementById("messageError").style.cssText="display : block; visibility : visible;",g=""):(m.setCustomValidity(""),p=!1,document.getElementById("messageError").style.cssText="display : none; visibility : hidden;"),""!==u.value&&(p=!0,e.preventDefault());const n=c.value.toString().replace(s,"");const a=o.value.toString().replace(s,"");const b=m.value.toString().replace(s,"");p||0!==v.length?console.log("ERRORS"):fetch(h,{method:"POST",headers:{"Content-Type":"application/json","Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0},body:JSON.stringify({name:n,reason:a,phone:r.value,email:d.value,message:b})}).then(e=>{"OK"===e.statusText&&(document.getElementById("form-wrapper").className="d-none",i.style.cssText="display : none; visibility : hidden;",document.getElementById("submitSuccessMessage").className="form-success")}).then(e=>{console.log("Success: ",e)}),v=[],e.preventDefault()})});